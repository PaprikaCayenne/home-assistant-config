new_script:
  alias: Trigger URC Event
  sequence:
  - event: urc_event_trigger
    event_data:
      event_id: '{{ event_id }}'
  fields:
    event_id:
      name: URC Event ID
      selector:
        text:
      description: A unique event id that will be triggered on the URC Controller
      required: true
  mode: parallel
  max: 100
  icon: mdi:home-sound-out-outline
bedroom_primary_light_control_script:
  alias: Bedroom Primary Light Control Script
  description: ''
  sequence:
  - choose:
    - conditions:
      - condition: time
        after: 06:00:00
        before: '11:00:00'
        weekday:
        - sun
        - mon
        - tue
        - wed
        - thu
        - fri
        - sat
      sequence:
      - action: light.turn_on
        metadata: {}
        data:
          color_temp_kelvin: 3500
          brightness_pct: 50
          transition: 1
        target:
          entity_id: light.bedroom_primary_hue_group_switch
    - conditions:
      - condition: time
        after: '11:00:00'
        before: '23:00:00'
        weekday:
        - sun
        - mon
        - tue
        - wed
        - thu
        - fri
        - sat
      sequence:
      - action: light.turn_on
        metadata: {}
        data:
          transition: 1
          color_temp_kelvin: 3500
          brightness_pct: 100
        target:
          entity_id: light.bedroom_primary_hue_group_switch
    - conditions:
      - condition: time
        after: '23:00:00'
        weekday:
        - sun
        - mon
        - tue
        - wed
        - thu
        - fri
        - sat
      sequence:
      - action: light.turn_on
        metadata: {}
        data:
          brightness_pct: 20
          color_temp_kelvin: 2800
          transition: 1
        target:
          entity_id: light.bedroom_primary_hue_group_switch
bedroom_primary_manual_on_via_dashboard:
  alias: 'Bedroom Primary: Manual On via Dashboard'
  description: Manually turns on the bedroom light and enables the manual override
    toggle.
  mode: single
  icon: mdi:lightbulb-on-outline
  sequence:
  - action: light.turn_on
    target:
      entity_id: light.bedroom_primary_hue_group_switch
    data:
      transition: 1
  - action: input_boolean.turn_on
    data: {}
    metadata: {}
    target:
      entity_id: input_boolean.bedroom_primary_lights_manual_override
bedroom_primary_manual_off_via_dashboard:
  alias: 'Bedroom Primary: Manual Off via Dashboard'
  description: Disables lights and motion override for Bedroom Primary when turned
    off via dashboard.
  mode: single
  sequence:
  - action: light.turn_off
    target:
      entity_id: light.bedroom_primary_hue_group_switch
    data:
      transition: 0.5
  - action: input_boolean.turn_off
    data: {}
    metadata: {}
    target:
      entity_id: input_boolean.bedroom_primary_lights_manual_override
  - action: input_boolean.turn_on
    target:
      entity_id: input_boolean.bedroom_primary_motion_enabled
    data: {}
    metadata: {}
bedroom_primary_dashboard_tap_logic:
  alias: 'Bedroom Primary: Dashboard Tap Logic'
  mode: single
  sequence:
  - choose:
    - conditions:
      - condition: state
        entity_id: light.bedroom_primary_hue_group_switch
        state: 'off'
      sequence:
      - action: script.bedroom_primary_manual_on_via_dashboard
    - conditions:
      - condition: state
        entity_id: light.bedroom_primary_hue_group_switch
        state: 'on'
      sequence:
      - action: script.bedroom_primary_manual_off_via_dashboard
kitchen_light_control_script:
  alias: 'Kitchen: Light Control - Script'
  description: Adjusts kitchen lighting based on time of day and motion detection
  sequence:
  - choose:
    - conditions:
      - condition: template
        value_template: '{% set now_ts = now().timestamp() %} {% set sunrise_ts =
          as_timestamp(state_attr(''sun.sun'', ''next_rising'')) %} {% set wkd = now().weekday()
          >= 5 %} {% set start_ts = now().replace(hour=(3 if wkd else 2), minute=0,
          second=0).timestamp() %} {{ now_ts >= start_ts and now_ts < sunrise_ts }}

          '
      sequence:
      - action: light.turn_on
        metadata: {}
        data:
          color_temp_kelvin: 2700
          transition: 0.5
          brightness_pct: 100
        target:
          entity_id: light.kitchen_hue_group_switch
    - conditions:
      - condition: time
        after: '23:00:00'
        before: 00:30:00
      sequence:
      - action: light.turn_on
        metadata: {}
        data:
          transition: 0.5
          color_temp_kelvin: 3000
          brightness_pct: 50
        target:
          entity_id: light.kitchen_hue_group_switch
    default:
    - action: light.turn_on
      metadata: {}
      data:
        transition: 0.5
        brightness_pct: 100
        color_temp_kelvin: 3500
      target:
        entity_id: light.kitchen_hue_group_switch
livingroom_light_control_script:
  alias: 'Livingroom: Light Control - Script'
  description: Adjusts Livingroom lighting based on time of day and motion detection
  sequence:
  - choose:
    - conditions:
      - condition: template
        value_template: '{% set now_ts = now().timestamp() %} {% set sunrise_ts =
          as_timestamp(state_attr(''sun.sun'', ''next_rising'')) %} {% set wkd = now().weekday()
          >= 5 %} {% set start_ts = now().replace(hour=(3 if wkd else 2), minute=0,
          second=0).timestamp() %} {{ now_ts >= start_ts and now_ts < sunrise_ts }}

          '
      sequence:
      - action: light.turn_on
        metadata: {}
        data:
          brightness_pct: 100
          color_temp_kelvin: 2700
          transition: 0.5
        target:
          entity_id: light.livingroom_hue_group_switch
    - conditions:
      - condition: time
        after: '23:00:00'
        before: 00:30:00
      sequence:
      - action: light.turn_on
        metadata: {}
        data:
          brightness_pct: 20
          color_temp_kelvin: 3000
          transition: 0.5
        target:
          entity_id: light.livingroom_hue_group_switch
    default:
    - action: light.turn_on
      metadata: {}
      data:
        brightness_pct: 100
        transition: 0.5
        color_temp_kelvin: 3500
      target:
        entity_id: light.livingroom_hue_group_switch
global_reset_manual_overrides_off:
  alias: 'Global: Reset Manual Overrides Off'
  mode: single
  icon: mdi:toggle-switch-off
  sequence:
  - action: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id:
      - input_boolean.office_lights_manual_override
      - input_boolean.kitchen_lights_manual_override
      - input_boolean.hallway_lights_manual_override
      - input_boolean.office_lights_manual_override
      - input_boolean.hallway_lights_manual_override
      - input_boolean.livingroom_lights_manual_override
      - input_boolean.bathroom_guest_lights_manual_override
      - input_boolean.bathroom_guest_lights_manual_override
      - input_boolean.bathroom_primary_lights_manual_override
      - input_boolean.bedroom_primary_lights_manual_override
      - input_boolean.stairs_lights_manual_override
  description: Turns off all manual override toggles (lights, cleaning, private time,
    etc.) to restore automation.
global_enable_motion_automation:
  alias: 'Global: Enable Motion Automation'
  icon: mdi:motion-sensor
  mode: single
  description: 'Enables motion automation toggles for rooms that still use motion
    booleans. Removes FP2-managed rooms (Kitchen, Livingroom).

    '
  sequence:
  - target:
      entity_id:
      - input_boolean.office_motion_enabled
      - input_boolean.bedroom_primary_motion_enabled
      - input_boolean.hallway_motion_enabled
      - input_boolean.bathroom_guest_motion_enabled
      - input_boolean.bathroom_primary_motion_enabled
      - input_boolean.stairs_motion_enabled
    action: input_boolean.turn_on
    data: {}
global_disable_motion_automation:
  alias: 'Global: Disable Motion Automation'
  icon: mdi:motion-pause
  mode: single
  description: 'Disables motion automation toggles for rooms still using motion booleans.
    Excludes Kitchen and Livingroom (FP2-managed).

    '
  sequence:
  - target:
      entity_id:
      - input_boolean.office_motion_enabled
      - input_boolean.bedroom_primary_motion_enabled
      - input_boolean.hallway_motion_enabled
      - input_boolean.bathroom_guest_motion_enabled
      - input_boolean.bathroom_primary_motion_enabled
      - input_boolean.stairs_motion_enabled
    action: input_boolean.turn_off
    data: {}
reset_kitchen_livingroom_motion:
  alias: Reset Kitchen & Livingroom
  description: 'Turns off manual override booleans for Kitchen and Livingroom. Used
    when exiting modes like Movie or Party to resume automation control.

    '
  mode: single
  sequence:
  - target:
      entity_id:
      - input_boolean.kitchen_lights_manual_override
      - input_boolean.livingroom_lights_manual_override
    action: input_boolean.turn_off
global_clear_all_overrides:
  alias: 'Global: Clear All Overrides'
  description: 'Turns off all manual lighting overrides and global mode booleans that
    interfere with motion automation.

    '
  mode: single
  icon: mdi:power-off
  sequence:
  - target:
      entity_id:
      - input_boolean.kitchen_lights_manual_override
      - input_boolean.livingroom_lights_manual_override
      - input_boolean.office_lights_manual_override
      - input_boolean.bedroom_primary_lights_manual_override
      - input_boolean.bathroom_primary_lights_manual_override
      - input_boolean.bathroom_guest_lights_manual_override
      - input_boolean.hallway_lights_manual_override
      - input_boolean.cleaning
      - input_boolean.party
      - input_boolean.movie
      - input_boolean.stairs_lights_manual_override
    action: input_boolean.turn_off
    data: {}
kitchen_toggle_manual_override:
  alias: 'Kitchen: Toggle Manual Override'
  description: 'Toggles the kitchen manual override boolean and turns the lights on
    if enabling override, or off if disabling it.

    '
  mode: single
  icon: mdi:lightbulb
  sequence:
  - variables:
      is_on: '{{ is_state(''input_boolean.kitchen_lights_manual_override'', ''on'')
        }}'
  - target:
      entity_id: input_boolean.kitchen_lights_manual_override
    action: input_boolean.toggle
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id: light.kitchen_hue_group_switch
        action: light.turn_on
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - target:
          entity_id: light.kitchen_hue_group_switch
        action: light.turn_off
kitchen_toggle_manual_override_2:
  alias: 'Kitchen: Toggle Manual Override'
  description: 'Toggles the kitchen manual override boolean and turns the lights on
    if enabling override, or off if disabling it.

    '
  mode: single
  icon: mdi:lightbulb
  sequence:
  - variables:
      is_on: '{{ is_state(''input_boolean.kitchen_lights_manual_override'', ''on'')
        }}'
  - target:
      entity_id: input_boolean.kitchen_lights_manual_override
    action: input_boolean.toggle
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id: light.kitchen_hue_group_switch
        action: light.turn_on
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - target:
          entity_id: light.kitchen_hue_group_switch
        action: light.turn_off
livingroom_toggle_manual_override:
  alias: 'Livingroom: Toggle Manual Override'
  description: 'Toggles the livingroom manual override boolean and turns the lights
    on if enabling override, or off if disabling it.

    '
  mode: single
  icon: mdi:lightbulb
  sequence:
  - variables:
      is_on: '{{ is_state(''input_boolean.livingroom_lights_manual_override'', ''on'')
        }}'
  - target:
      entity_id: input_boolean.livingroom_lights_manual_override
    action: input_boolean.toggle
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id: light.livingroom_hue_group_switch
        action: light.turn_on
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - target:
          entity_id: light.livingroom_hue_group_switch
        action: light.turn_off
office_toggle_manual_override:
  alias: 'Office: Toggle Manual Override'
  description: 'Toggles the office manual override boolean and turns the lights on
    if enabling override, or off if disabling it.

    '
  mode: single
  icon: mdi:desk-lamp
  sequence:
  - variables:
      is_on: '{{ is_state(''input_boolean.office_lights_manual_override'', ''on'')
        }}'
  - target:
      entity_id: input_boolean.office_lights_manual_override
    action: input_boolean.toggle
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id: light.office_desk_lamp
        action: light.turn_on
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - target:
          entity_id: light.office_desk_lamp
        action: light.turn_off
hallway_toggle_manual_override:
  alias: 'Hallway: Toggle Manual Override'
  description: 'Toggles the hallway manual override boolean and turns the lights on
    if enabling override, or off if disabling it.

    '
  mode: single
  icon: mdi:lightbulb-on-outline
  sequence:
  - variables:
      is_on: '{{ is_state(''input_boolean.hallway_lights_manual_override'', ''on'')
        }}'
  - target:
      entity_id: input_boolean.hallway_lights_manual_override
    action: input_boolean.toggle
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id: light.hallway_ceiling_lights
        action: light.turn_on
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - target:
          entity_id: light.hallway_ceiling_lights
        action: light.turn_off
party_toggle_mode:
  alias: 'Party: Toggle Mode'
  description: 'Toggles party mode and turns on common area lights for social settings.

    '
  mode: single
  icon: mdi:party-popper
  sequence:
  - variables:
      is_on: '{{ is_state(''input_boolean.party'', ''on'') }}'
  - target:
      entity_id: input_boolean.party
    action: input_boolean.toggle
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id:
          - light.kitchen_hue_group_switch
          - light.livingroom_hue_group_switch
          - light.hallway_ceiling_lights
          - light.patio_hue_group_switch
        action: light.turn_on
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - target:
          entity_id:
          - light.kitchen_hue_group_switch
          - light.livingroom_hue_group_switch
          - light.hallway_ceiling_lights
          - light.patio_hue_group_switch
        action: light.turn_off
cleaning_toggle_mode:
  alias: 'Cleaning: Toggle Mode'
  description: 'Toggles cleaning mode. When enabled, turns on all house lights (excluding
    pantry), and disables motion automation for non-FP2 rooms. When disabled, turns
    off lights and re-enables motion automation.

    '
  mode: single
  icon: mdi:broom
  sequence:
  - variables:
      is_on: '{{ is_state(''input_boolean.cleaning'', ''on'') }}'
  - target:
      entity_id: input_boolean.cleaning
    action: input_boolean.toggle
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id:
          - light.kitchen_hue_group_switch
          - light.livingroom_hue_group_switch
          - light.bedroom_primary_hue_group_switch
          - light.patio_hue_group_switch
          - light.downstairs_inside
          - light.downstairs_hue_group
          - light.upstairs_hue_group
          - light.office_desk_lamp
          - light.bedroom_lamp_left
          - light.bedroom_lamp_right
          - light.livingroom_lamp_1
          - light.livingroom_lamp_2
          - light.kitchen_ceiling_lights
          - light.hallway_ceiling_lights
          - light.bathroom_primary_ceiling
          - light.bathroom_guest_ceiling
          - light.stairs_lights
          - light.entryway_ceiling
          - light.guest_bedroom_ceiling
        action: light.turn_on
      - target:
          entity_id:
          - input_boolean.office_motion_enabled
          - input_boolean.bedroom_primary_motion_enabled
          - input_boolean.bathroom_primary_motion_enabled
          - input_boolean.bathroom_guest_motion_enabled
          - input_boolean.hallway_motion_enabled
        action: input_boolean.turn_off
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - target:
          entity_id:
          - light.kitchen_hue_group_switch
          - light.livingroom_hue_group_switch
          - light.bedroom_primary_hue_group_switch
          - light.patio_hue_group_switch
          - light.downstairs_inside
          - light.downstairs_hue_group
          - light.upstairs_hue_group
          - light.office_desk_lamp
          - light.bedroom_lamp_left
          - light.bedroom_lamp_right
          - light.livingroom_lamp_1
          - light.livingroom_lamp_2
          - light.kitchen_ceiling_lights
          - light.hallway_ceiling_lights
          - light.bathroom_primary_ceiling
          - light.bathroom_guest_ceiling
          - light.stairs_lights
          - light.entryway_ceiling
          - light.guest_bedroom_ceiling
        action: light.turn_off
      - target:
          entity_id:
          - input_boolean.office_motion_enabled
          - input_boolean.bedroom_primary_motion_enabled
          - input_boolean.bathroom_primary_motion_enabled
          - input_boolean.bathroom_guest_motion_enabled
          - input_boolean.hallway_motion_enabled
        action: input_boolean.turn_on
bedroom_toggle_private_time:
  alias: 'Bedroom: Toggle Private Time'
  description: 'Toggles private time mode in the primary bedroom. When enabled, sets
    lights  to low brightness, activates Blood Moon lighting, and enables privacy
    mode  on the bedroom camera. When disabled, turns off lights and disables privacy
    mode.

    '
  mode: single
  icon: mdi:bed
  sequence:
  - variables:
      is_on: '{{ is_state(''input_boolean.private_time'', ''on'') }}'
  - target:
      entity_id: input_boolean.private_time
    action: input_boolean.toggle
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id: light.bedroom_primary_hue_group_switch
        data:
          brightness_pct: 5
          color_name: red
        action: light.turn_on
      - target:
          entity_id: switch.camera_bedroom_primary_privacy_mode
        action: switch.turn_on
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - target:
          entity_id: light.bedroom_primary_hue_group_switch
        action: light.turn_off
      - target:
          entity_id: switch.camera_bedroom_primary_privacy_mode
        action: switch.turn_off
kitchen_toggle_lights_manual_override:
  alias: 'Kitchen: Toggle Lights & Manual Override'
  description: 'Turns lights ON using kitchen light control script (if off) and enables
    override. If lights are ON, turns them OFF, waits 30s, then resets motion and
    disables override.

    '
  mode: single
  icon: mdi:lightbulb-group
  sequence:
  - variables:
      is_on: '{{ is_state(''light.kitchen_hue_group_switch'', ''on'') }}'
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - action: script.kitchen_light_control_script
        data: {}
      - target:
          entity_id: input_boolean.kitchen_lights_manual_override
        action: input_boolean.turn_on
        data: {}
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - data:
          transition: 0.5
        target:
          entity_id: light.kitchen_hue_group_switch
        action: light.turn_off
      - delay:
          seconds: 30
      - action: script.reset_kitchen_livingroom_motion
        data: {}
livingroom_toggle_lights_manual_override:
  alias: 'Livingroom: Toggle Lights & Manual Override'
  description: 'Turns lights ON using living room light control script (if off) and
    enables override. If lights are ON, turns them OFF, waits 30s, then resets motion
    and disables override.

    '
  mode: single
  icon: mdi:lightbulb-group
  sequence:
  - variables:
      is_on: '{{ is_state(''light.livingroom_hue_group_switch'', ''on'') }}'
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - action: script.livingroom_light_control_script
        data: {}
      - target:
          entity_id: input_boolean.livingroom_lights_manual_override
        action: input_boolean.turn_on
        data: {}
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - data:
          transition: 0.5
        target:
          entity_id: light.livingroom_hue_group_switch
        action: light.turn_off
      - delay:
          seconds: 30
      - action: script.reset_kitchen_livingroom_motion
        data: {}
downstairs_toggle_lights_manual_override:
  alias: 'Downstairs: Toggle Lights & Manual Override'
  description: 'Toggles both kitchen and living room lights with their respective
    light logic. Enables or disables manual override based on current state. Calls
    both individual toggle scripts.

    '
  mode: single
  icon: mdi:lightbulb-group
  sequence:
  - action: script.kitchen_toggle_lights_manual_override
    metadata: {}
    data: {}
  - action: script.livingroom_toggle_lights_manual_override
    metadata: {}
    data: {}
bedroom_toggle_lights_manual_override:
  alias: 'Bedroom: Toggle Lights & Manual Override'
  description: 'Toggles bedroom lights and motion override. If lights are off, turns
    them on using bedroom light control script and enables override. If lights are
    on, turns them off, waits 30s, then disables override and re-enables motion.

    '
  mode: single
  icon: mdi:lightbulb-group
  sequence:
  - variables:
      is_on: '{{ is_state(''light.bedroom_primary_hue_group_switch'', ''on'') }}'
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - action: script.bedroom_primary_light_control_script
        data: {}
      - target:
          entity_id: input_boolean.bedroom_primary_lights_manual_override
        action: input_boolean.turn_on
        data: {}
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - data:
          transition: 0.5
        target:
          entity_id: light.bedroom_primary_hue_group_switch
        action: light.turn_off
      - delay:
          seconds: 30
      - action: script.bedroom_primary_reset_motion
        data: {}
'1749759181927':
  alias: 'Bedroom Guest: Toggle Lights & Manual Override'
  description: 'Toggles guest bedroom lights and manual override. If lights are off,
    turns them on and enables override. If lights are on, turns them off, waits 30s,
    then disables override.

    '
  mode: single
  icon: mdi:lightbulb-group
  sequence:
  - variables:
      is_on: '{{ is_state(''light.bedroom_guest_main_lights'', ''on'') }}'
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id: light.bedroom_guest_main_lights
        action: light.turn_on
        data: {}
      - target:
          entity_id: input_boolean.bedroom_guest_lights_manual_override
        action: input_boolean.turn_on
        data: {}
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - data:
          transition: 0.5
        target:
          entity_id: light.bedroom_guest_main_lights
        action: light.turn_off
      - delay:
          seconds: 30
      - target:
          entity_id: input_boolean.bedroom_guest_lights_manual_override
        action: input_boolean.turn_off
        data: {}
hallway_reset_motion:
  alias: 'Hallway: Reset Motion'
  description: 'Turns off hallway manual override and re-enables motion automation.

    '
  mode: single
  icon: mdi:motion-sensor
  sequence:
  - target:
      entity_id: input_boolean.hallway_lights_manual_override
    action: input_boolean.turn_off
    data: {}
  - target:
      entity_id: input_boolean.hallway_motion_enabled
    action: input_boolean.turn_on
    data: {}
bedroom_primary_reset_motion:
  alias: 'Bedroom Primary: Reset Motion'
  description: 'Turns off manual override and re-enables motion automation in the
    primary bedroom.

    '
  mode: single
  icon: mdi:motion-sensor
  sequence:
  - target:
      entity_id: input_boolean.bedroom_primary_lights_manual_override
    action: input_boolean.turn_off
    data: {}
  - target:
      entity_id: input_boolean.bedroom_primary_motion_enabled
    action: input_boolean.turn_on
    data: {}
hallway_toggle_lights_manual_override:
  alias: 'Hallway: Toggle Lights & Manual Override'
  description: 'Toggles hallway lights and motion override. If lights are off, turns
    them on and enables override. If lights are on, turns them off, waits 30s, disables
    override, and re-enables motion.

    '
  mode: single
  icon: mdi:lightbulb-group
  sequence:
  - variables:
      is_on: '{{ is_state(''light.hallway_ceiling_lights'', ''on'') }}'
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id: light.hallway_ceiling_lights
        action: light.turn_on
        data: {}
      - target:
          entity_id: input_boolean.hallway_lights_manual_override
        action: input_boolean.turn_on
        data: {}
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - data:
          transition: 0.5
        target:
          entity_id: light.hallway_ceiling_lights
        action: light.turn_off
      - delay:
          seconds: 30
      - action: script.hallway_reset_motion
        data: {}
bathroom_primary_reset_motion:
  alias: 'Bathroom Primary: Reset Motion'
  description: 'Turns off primary bathroom manual override and re-enables motion automation.

    '
  mode: single
  icon: mdi:motion-sensor
  sequence:
  - target:
      entity_id: input_boolean.bathroom_primary_lights_manual_override
    action: input_boolean.turn_off
    data: {}
  - target:
      entity_id: input_boolean.bathroom_primary_motion_enabled
    action: input_boolean.turn_on
    data: {}
bathroom_primary_toggle_lights_manual_override:
  alias: 'Bathroom Primary: Toggle Lights & Manual Override'
  description: 'Toggles primary bathroom lights and motion override. If lights are
    off, turns them on and enables override. If lights are on, turns them off, waits
    30s, disables override, and re-enables motion.

    '
  mode: single
  icon: mdi:lightbulb-group
  sequence:
  - variables:
      is_on: '{{ is_state(''light.bathroom_primary_ceiling'', ''on'') }}'
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id: light.bathroom_primary_ceiling
        action: light.turn_on
        data: {}
      - target:
          entity_id: input_boolean.bathroom_primary_lights_manual_override
        action: input_boolean.turn_on
        data: {}
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - data:
          transition: 0.5
        target:
          entity_id: light.bathroom_primary_ceiling
        action: light.turn_off
      - delay:
          seconds: 30
      - action: script.bathroom_primary_reset_motion
        data: {}
bathroom_guest_reset_motion:
  alias: 'Bathroom Guest: Reset Motion'
  description: 'Turns off guest bathroom manual override and re-enables motion automation.

    '
  mode: single
  icon: mdi:motion-sensor
  sequence:
  - target:
      entity_id: input_boolean.bathroom_guest_lights_manual_override
    action: input_boolean.turn_off
    data: {}
  - target:
      entity_id: input_boolean.bathroom_guest_motion_enabled
    action: input_boolean.turn_on
    data: {}
bathroom_guest_toggle_lights_manual_override:
  alias: 'Bathroom Guest: Toggle Lights & Manual Override'
  description: 'Toggles guest bathroom lights and motion override. If lights are off,
    turns them on and enables override. If lights are on, turns them off, waits 30s,
    disables override, and re-enables motion.

    '
  mode: single
  icon: mdi:lightbulb-group
  sequence:
  - variables:
      is_on: '{{ is_state(''light.bathroom_guest_ceiling'', ''on'') }}'
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id: light.bathroom_guest_ceiling
        action: light.turn_on
        data: {}
      - target:
          entity_id: input_boolean.bathroom_guest_lights_manual_override
        action: input_boolean.turn_on
        data: {}
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - data:
          transition: 0.5
        target:
          entity_id: light.bathroom_guest_ceiling
        action: light.turn_off
      - delay:
          seconds: 30
      - action: script.bathroom_guest_reset_motion
        data: {}
downstairs_enable_motion_override:
  alias: 'Downstairs: Enable Motion Override'
  description: 'Enables manual override for both kitchen and livingroom lights and
    provides a brief visual cue by flashing the lights.

    '
  sequence:
  - target:
      entity_id:
      - input_boolean.kitchen_lights_manual_override
      - input_boolean.livingroom_lights_manual_override
    action: input_boolean.turn_on
  - target:
      entity_id:
      - light.kitchen_hue_group_switch
      - light.livingroom_hue_group_switch
    data:
      transition: 0.2
    action: light.turn_off
  - delay:
      milliseconds: 300
  - target:
      entity_id:
      - light.kitchen_hue_group_switch
      - light.livingroom_hue_group_switch
    data:
      brightness_pct: 100
      transition: 0.3
    action: light.turn_on
  mode: single
downstairs_enable_manual_override:
  alias: 'Downstairs: Enable Manual Override'
  description: 'Enables manual override for Kitchen and Livingroom. Disables motion-based
    lighting indirectly via presence detection.

    '
  mode: single
  sequence:
  - target:
      entity_id:
      - input_boolean.kitchen_lights_manual_override
      - input_boolean.livingroom_lights_manual_override
    action: input_boolean.turn_on
downstairs_activate_concentrate_mode:
  alias: 'Downstairs: Activate Concentrate Mode'
  description: 'Activates the Downstairs Concentrate scene and enables manual override
    for Kitchen and Livingroom (used to suppress FP2-triggered lighting changes).

    '
  mode: single
  sequence:
  - target:
      entity_id: scene.downstairs_inside_concentrate
    action: scene.turn_on
  - target:
      entity_id:
      - input_boolean.kitchen_lights_manual_override
      - input_boolean.livingroom_lights_manual_override
    action: input_boolean.turn_on
movie_mode_toggle_and_lights:
  alias: 'Movie Mode: Toggle and Lights'
  description: 'Toggles Movie Mode. When turned on, activates the movie scene and
    enables overrides to suppress FP2-based lighting automations. When turned off,
    disables overrides and allows FP2 to resume control.

    '
  icon: mdi:movie-open
  mode: single
  sequence:
  - variables:
      is_on: '{{ is_state(''input_boolean.movie'', ''on'') }}'
  - target:
      entity_id: input_boolean.movie
    action: input_boolean.toggle
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ not is_on }}'
      sequence:
      - target:
          entity_id: scene.downstairs_inside_movie_tokyo
        action: scene.turn_on
      - target:
          entity_id:
          - input_boolean.kitchen_lights_manual_override
          - input_boolean.livingroom_lights_manual_override
        action: input_boolean.turn_on
    - conditions:
      - condition: template
        value_template: '{{ is_on }}'
      sequence:
      - target:
          entity_id:
          - input_boolean.kitchen_lights_manual_override
          - input_boolean.livingroom_lights_manual_override
        action: input_boolean.turn_off
