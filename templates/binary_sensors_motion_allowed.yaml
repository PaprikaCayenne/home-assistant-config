# File: templates/binary_sensors_motion_allowed.yaml
# Version: v1.3.6 â€” 2025-06-11
# Notes: Fixed root format for include_dir_merge_list

- binary_sensor:
  - name: "motion_kitchen_allowed"
    unique_id: motion_kitchen_allowed
    state: >
      {{ is_state('input_boolean.kitchen_motion_enabled', 'on')
         and is_state('input_boolean.kitchen_lights_manual_override', 'off')
         and is_state('input_boolean.cleaning', 'off')
         and is_state('input_boolean.party', 'off')
         and is_state('input_boolean.movie', 'off') }}
    availability: >
      {{ states('input_boolean.kitchen_motion_enabled') not in ['unknown', 'unavailable']
         and states('input_boolean.kitchen_lights_manual_override') not in ['unknown', 'unavailable']
         and states('input_boolean.cleaning') not in ['unknown', 'unavailable']
         and states('input_boolean.party') not in ['unknown', 'unavailable']
         and states('input_boolean.movie') not in ['unknown', 'unavailable'] }}
    icon: mdi:motion-sensor

  - name: "motion_livingroom_allowed"
    unique_id: motion_livingroom_allowed
    state: >
      {{ is_state('input_boolean.livingroom_motion_enabled', 'on')
         and is_state('input_boolean.livingroom_lights_manual_override', 'off')
         and is_state('input_boolean.cleaning', 'off')
         and is_state('input_boolean.party', 'off')
         and is_state('input_boolean.movie', 'off') }}
    availability: >
      {{ states('input_boolean.livingroom_motion_enabled') not in ['unknown', 'unavailable']
         and states('input_boolean.livingroom_lights_manual_override') not in ['unknown', 'unavailable']
         and states('input_boolean.cleaning') not in ['unknown', 'unavailable']
         and states('input_boolean.party') not in ['unknown', 'unavailable']
         and states('input_boolean.movie') not in ['unknown', 'unavailable'] }}
    icon: mdi:motion-sensor

  - name: "motion_bedroom_primary_allowed"
    unique_id: motion_bedroom_primary_allowed
    state: >
      {{ is_state('input_boolean.bedroom_primary_motion_enabled', 'on')
         and is_state('input_boolean.bedroom_primary_lights_manual_override', 'off')
         and is_state('input_boolean.cleaning', 'off')
         and is_state('input_boolean.party', 'off')
         and is_state('input_boolean.private_time', 'off') }}
    availability: >
      {{ states('input_boolean.bedroom_primary_motion_enabled') not in ['unknown', 'unavailable']
         and states('input_boolean.bedroom_primary_lights_manual_override') not in ['unknown', 'unavailable']
         and states('input_boolean.cleaning') not in ['unknown', 'unavailable']
         and states('input_boolean.party') not in ['unknown', 'unavailable']
         and states('input_boolean.private_time') not in ['unknown', 'unavailable'] }}
    icon: mdi:motion-sensor

  - name: "motion_office_allowed"
    unique_id: motion_office_allowed
    state: >
      {{ is_state('input_boolean.office_motion_enabled', 'on')
         and is_state('input_boolean.office_lights_manual_override', 'off')
         and is_state('input_boolean.cleaning', 'off') }}
    availability: >
      {{ states('input_boolean.office_motion_enabled') not in ['unknown', 'unavailable']
         and states('input_boolean.office_lights_manual_override') not in ['unknown', 'unavailable']
         and states('input_boolean.cleaning') not in ['unknown', 'unavailable'] }}
    icon: mdi:motion-sensor

  - name: "motion_bathroom_guest_allowed"
    unique_id: motion_bathroom_guest_allowed
    state: >
      {{ is_state('input_boolean.bathroom_guest_motion_enabled', 'on')
         and is_state('input_boolean.bathroom_guest_lights_manual_override', 'off')
         and is_state('input_boolean.cleaning', 'off') }}
    availability: >
      {{ states('input_boolean.bathroom_guest_motion_enabled') not in ['unknown', 'unavailable']
         and states('input_boolean.bathroom_guest_lights_manual_override') not in ['unknown', 'unavailable']
         and states('input_boolean.cleaning') not in ['unknown', 'unavailable'] }}
    icon: mdi:motion-sensor

  - name: "motion_hallway_allowed"
    unique_id: motion_hallway_allowed
    state: >
      {{ is_state('input_boolean.hallway_motion_enabled', 'on')
         and is_state('input_boolean.hallway_lights_manual_override', 'off')
         and is_state('input_boolean.cleaning', 'off') }}
    availability: >
      {{ states('input_boolean.hallway_motion_enabled') not in ['unknown', 'unavailable']
         and states('input_boolean.hallway_lights_manual_override') not in ['unknown', 'unavailable']
         and states('input_boolean.cleaning') not in ['unknown', 'unavailable'] }}
    icon: mdi:motion-sensor

  - name: "motion_bathroom_primary_allowed"
    unique_id: motion_bathroom_primary_allowed
    state: >
      {{ is_state('input_boolean.bathroom_primary_motion_enabled', 'on')
         and is_state('input_boolean.bathroom_primary_lights_manual_override', 'off')
         and is_state('input_boolean.cleaning', 'off') }}
    availability: >
      {{ states('input_boolean.bathroom_primary_motion_enabled') not in ['unknown', 'unavailable']
         and states('input_boolean.bathroom_primary_lights_manual_override') not in ['unknown', 'unavailable']
         and states('input_boolean.cleaning') not in ['unknown', 'unavailable'] }}
    icon: mdi:motion-sensor
